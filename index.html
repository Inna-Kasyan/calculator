<!DOCTYPE html>
<html lang='ru'>

<head>
    <title> Calculator JS</title>
   
    <meta http-equiv="Content-type" , content="text/html, charset = UTF-8">
    <link rel='stylesheet' href="index.css">
   


</head>

<body>
<section>
    <div class="container">
        <div class="screen">
            <div class="screen-1">0</div>
            <div class="screen-2">0</div>
            <div class="screen-temp"></div>
        </div>
        <div class="buttons">
            <div class="btn clear">C</div>
            <div class="btn del">DEL</div>
            <div class="btn operation">%</div>
            <div class="btn operation">/</div>
            <div class="btn value">7</div>
            <div class="btn value">8</div>
            <div class="btn value">9</div>
            <div class="btn operation">X</div>
            <div class="btn value">4</div>
            <div class="btn value">5</div>
            <div class="btn value">6</div>
            <div class="btn operation">-</div>
            <div class="btn value">1</div>
            <div class="btn value">2</div>
            <div class="btn value">3</div>
            <div class="btn operation">+</div>
            <div class="btn value zero">0</div>
            <div class="btn value dot">.</div>
            <div class="btn equal">=</div>
        </div>
    </div>
</section>
    <script >
        const screen1 = document.querySelector('.screen-1')
        const screen2 = document.querySelector('.screen-2')
        const screenTemp = document.querySelector('.screen-temp')
        const values = document.querySelectorAll('.value')
        const operations = document.querySelectorAll('.operation')
        const equal = document.querySelector('.equal')
        const clear = document.querySelector('.clear')
        const del = document.querySelector('.del')

        let x = "";
        let y = "";
        let result = null;
        let finalAction = "";
        let fraction = false;

        values.forEach( value => {
            value.addEventListener("click", (e)=>{
                if(e.target.innerText === "." && !fraction){
                    fraction = true;
                } else if(e.target.innerText === "." && fraction){
                    return;
                }
                y += e.target.innerText;
                screen2.innerText = y;
            })
        })
        operations.forEach( (operation) => {
            operation.addEventListener("click", (e) => {
                if(!y) return;
                fraction = false;
                const sign = e.target.innerText;
                console.log(sign)
                if(x && y && finalAction){
                    initCalculation();
                } else{
                    result = parseFloat(y)
                }
                updateScreen(sign);
                finalAction = sign;
                console.log(result);


            })
            
        
        })

        function updateScreen(name = ""){
            x += y + " " + name + " ";
             screen1.innerText = x;
             screen2.innerText = "";
             y = "";
             screenTemp.innerText = result;
        }

        function initCalculation(){
            console.log(result);
            if(finalAction === "X"){
                result = parseFloat(result) * parseFloat(y);
            } else if(finalAction === "+"){

            result = parseFloat(result) + parseFloat(y);
            }else if(finalAction === "-"){
                console.log(result);
                console.log(parseFloat(y));
            result = parseFloat(result) - parseFloat(y);
            } else if(finalAction === "/"){
                if(parseFloat(y) === 0){
                    throw new Error("Ошибка")
                }
            result = parseFloat(result) / parseFloat(y);
            } else if(finalAction === "%"){
            result = parseFloat(result) % parseFloat(y);
            }

            result = result.toFixed(8);
            console.log(result);
        }

        equal.addEventListener("click", (e) => {
            if(!x || !y) return;
            fraction = false;
            initCalculation();
            updateScreen();
            screen2.innerText = result;
            screenTemp.innerText = "";
            y = result;
            x = "";
        })

        clear.addEventListener("click", (e)=>{
            screen1.innerText = "";
            screen2.innerText = "0";
            x = "";
            y = "";
            result = "";
            screenTemp.innerText = "";
        })

        del.addEventListener("click", (e) => {
         screen2.innerText = "";
         y = "";
        })






   
   

    </script>

</body>

</html>











<!--

-->